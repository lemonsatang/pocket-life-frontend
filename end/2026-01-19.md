# í”„ë¡ íŠ¸ì—”ë“œ ì—…ë°ì´íŠ¸ ë‚´ì—­
**ì‘ì—… ë‚ ì§œ**: 2026-01-19  
**ì‘ì—… ë²”ìœ„**: í†µê³„ í˜ì´ì§€ (StatsPage) UI ê°œì„  ë° ê¸°ëŠ¥ ì¶”ê°€

---

## 1. ì£¼ ë‹¨ìœ„ ë‚ ì§œ í‘œì‹œ í˜•ì‹ ë³€ê²½

### ë³€ê²½ ë‚´ìš©
- ê¸°ì¡´: `yyyy-mm-dd ~ yyyy-mm-dd` (í•œ ì¤„ í‘œì‹œ)
- ë³€ê²½: ì¤„ë°”ê¿ˆ í˜•ì‹ìœ¼ë¡œ ë³€ê²½
  ```
  yyyy-mm-dd
       ~
  yyyy-mm-dd
  ```

### ìˆ˜ì • íŒŒì¼
- `src/pages/StatsPage/StatsPage.jsx`

### ì£¼ìš” ì½”ë“œ ë³€ê²½

**getPeriodText í•¨ìˆ˜ ìˆ˜ì •** (817-829ë²ˆì§¸ ì¤„)
```jsx
const getPeriodText = () => {
  const range = getPeriodRange(new Date(currentDate), periodType);
  if (periodType === 'week') {
    return (
      <span className="stats-week-date-text">
        <div className="stats-date-line">{formatDate(range.startDate)}</div>
        <div className="stats-date-separator">~</div>
        <div className="stats-date-line">{formatDate(range.endDate)}</div>
      </span>
    );
  } else {
    const year = range.startDate.getFullYear();
    const month = range.startDate.getMonth() + 1;
    return `${year}ë…„ ${month}ì›”`;
  }
};
```

**CSS ìŠ¤íƒ€ì¼ ì¶”ê°€** (`src/pages/StatsPage/StatsPage.css`)
```css
.stats-week-date-text {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  line-height: 1.4;
}

.stats-date-line {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  text-align: center;
}

.stats-date-separator {
  display: block;
  text-align: center;
  font-size: 0.9rem;
  color: #718096;
}
```

---

## 2. ë‹¬ë ¥ ì•„ì´ì½˜ ì œê±°

### ë³€ê²½ ë‚´ìš©
- ì£¼ ë‹¨ìœ„ ì„ íƒ ì‹œ í‘œì‹œë˜ë˜ ë‹¬ë ¥ ì•„ì´ì½˜(ğŸ“…) ì œê±°
- ë‚ ì§œ í‘œì‹œ ì˜ì—­ì—ì„œ ë‹¬ë ¥ ì•„ì´ì½˜ ê´€ë ¨ ì½”ë“œ ì‚­ì œ

### ìˆ˜ì • íŒŒì¼
- `src/pages/StatsPage/StatsPage.jsx`

### ì£¼ìš” ì½”ë“œ ë³€ê²½

**JSX ìˆ˜ì •** (878-882ë²ˆì§¸ ì¤„)
```jsx
// ë³€ê²½ ì „
<span className="stats-date-text">
  {getPeriodText()} ğŸ“…
</span>

// ë³€ê²½ í›„
<span className="stats-date-text">
  {getPeriodText()}
</span>
```

**getPeriodText í•¨ìˆ˜**ì—ì„œë„ ë‹¬ë ¥ ì•„ì´ì½˜ ì œê±° (825ë²ˆì§¸ ì¤„)
```jsx
// ë³€ê²½ ì „
<div className="stats-date-line">
  {formatDate(range.startDate)} <span className="stats-calendar-icon">ğŸ“…</span>
</div>

// ë³€ê²½ í›„
<div className="stats-date-line">{formatDate(range.startDate)}</div>
```

---

## 3. ê¸°ë¡ì—†ìŒ í•­ëª© ë‚ ì§œ í‘œì‹œ ê¸°ëŠ¥ ì¶”ê°€

### ë³€ê²½ ë‚´ìš©
- ì‹ë‹¨ê´€ë¦¬ ì°¨íŠ¸ì—ì„œ "ê¸°ë¡ ì—†ìŒ" í•­ëª©ì— í•´ë‹¹ ë‚ ì§œë¥¼ `(nì¼, nì¼)` í˜•ì‹ìœ¼ë¡œ í‘œì‹œ
- ê¸°ë¡ì´ ì—†ëŠ” ë‚ ì§œë¥¼ ì¶”ì í•˜ê³  í‘œì‹œí•˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„

### ìˆ˜ì • íŒŒì¼
- `src/pages/StatsPage/StatsPage.jsx`

### ì£¼ìš” ì½”ë“œ ë³€ê²½

#### 3.1. dateStatusMapì— noRecord ì¶”ê°€ (493ë²ˆì§¸ ì¤„)
```jsx
// ë³€ê²½ ì „
const dateStatusMap = { normal: [], over: [], under: [] };

// ë³€ê²½ í›„
const dateStatusMap = { normal: [], over: [], under: [], noRecord: [] };
```

#### 3.2. ê¸°ë¡ ì—¬ë¶€ ì¶”ì  ë¡œì§ ì¶”ê°€ (497-545ë²ˆì§¸ ì¤„)
```jsx
for (let d = new Date(start); d <= end; d.setDate(d.getDate() + 1)) {
  totalPeriodDays++;
  const dateStr = formatDate(d);
  let hasRecord = false; // ê¸°ë¡ ì—¬ë¶€ í™•ì¸ ë³€ìˆ˜ ì¶”ê°€
  
  try {
    const [mealRes, statsRes] = await Promise.all([
      dataApi.get(`/api/meals`, { params: { date: dateStr } }).catch(() => ({ data: [] })),
      dataApi.get(`/api/stats/meal`, { params: { date: dateStr } }).catch(() => ({ data: null }))
    ]);
    
    if (mealRes.data && Array.isArray(mealRes.data) && mealRes.data.length > 0) {
      hasRecord = true; // ê¸°ë¡ ìˆìŒ í‘œì‹œ
      // ... ê¸°ì¡´ ë¡œì§ ...
    }
    
    // ê¸°ë¡ì´ ì—†ëŠ” ë‚ ì§œë¥¼ noRecordì— ì¶”ê°€
    if (!hasRecord) {
      dateStatusMap.noRecord.push(dateStr);
    }
  } catch (e) {
    console.error(`ë‚ ì§œ ${dateStr} ì‹ë‹¨ ì¡°íšŒ ì‹¤íŒ¨:`, e);
    // ì—ëŸ¬ ë°œìƒ ì‹œì—ë„ ê¸°ë¡ì—†ìŒìœ¼ë¡œ ì²˜ë¦¬
    dateStatusMap.noRecord.push(dateStr);
  }
}
```

#### 3.3. State ì´ˆê¸°ê°’ ì—…ë°ì´íŠ¸ (154, 162ë²ˆì§¸ ì¤„)
```jsx
// currentDietDetail state
const [currentDietDetail, setCurrentDietDetail] = useState({ 
  normalDays: 0, 
  overDays: 0, 
  underDays: 0, 
  totalPeriodDays: 0, 
  dateStatusMap: { normal: [], over: [], under: [], noRecord: [] } 
});

// prevDietDetail state
const [prevDietDetail, setPrevDietDetail] = useState({ 
  normalDays: 0, 
  overDays: 0, 
  underDays: 0, 
  totalPeriodDays: 0, 
  dateStatusMap: { normal: [], over: [], under: [], noRecord: [] } 
});
```

#### 3.4. UIì— ë‚ ì§œ í‘œì‹œ ì¶”ê°€ (963-975ë²ˆì§¸ ì¤„)
```jsx
{currentDietDetail.totalPeriodDays > (currentDietDetail.normalDays + currentDietDetail.overDays + currentDietDetail.underDays) && (
  <div className="stats-detail-item" style={{ color: '#9ca3af' }}>
    ê¸°ë¡ ì—†ìŒ: {currentDietDetail.totalPeriodDays - (currentDietDetail.normalDays + currentDietDetail.overDays + currentDietDetail.underDays)}ì¼
    {currentDietDetail.dateStatusMap?.noRecord && currentDietDetail.dateStatusMap.noRecord.length > 0 && (
      <div className="stats-detail-dates">
        ({currentDietDetail.dateStatusMap.noRecord.map(date => {
          const parts = date.split('-');
          return parts.length === 3 ? `${parts[2]}ì¼` : '';
        }).filter(Boolean).join(',')})
      </div>
    )}
  </div>
)}
```

#### 3.5. State ì—…ë°ì´íŠ¸ ë¡œì§ ìˆ˜ì • (624-625, 638-639ë²ˆì§¸ ì¤„)
```jsx
// State ì—…ë°ì´íŠ¸ ì‹œ noRecord í¬í•¨
setCurrentDietDetail({ 
  normalDays: currentDietResult.normalDays, 
  overDays: currentDietResult.overDays, 
  underDays: currentDietResult.underDays, 
  totalPeriodDays: currentDietResult.totalPeriodDays || 0, 
  dateStatusMap: currentDietResult.dateStatusMap || { normal: [], over: [], under: [], noRecord: [] } 
});

setPrevDietDetail({ 
  normalDays: prevDietResult.normalDays, 
  overDays: prevDietResult.overDays, 
  underDays: prevDietResult.underDays, 
  totalPeriodDays: prevDietResult.totalPeriodDays || 0, 
  dateStatusMap: prevDietResult.dateStatusMap || { normal: [], over: [], under: [], noRecord: [] } 
});
```

---

## ë³€ê²½ ì‚¬í•­ ìš”ì•½

### ê¸°ëŠ¥ ê°œì„ 
1. âœ… ì£¼ ë‹¨ìœ„ ë‚ ì§œ í‘œì‹œë¥¼ ì¤„ë°”ê¿ˆ í˜•ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ê°€ë…ì„± í–¥ìƒ
2. âœ… ë¶ˆí•„ìš”í•œ ë‹¬ë ¥ ì•„ì´ì½˜ ì œê±°ë¡œ UI ë‹¨ìˆœí™”
3. âœ… ê¸°ë¡ì—†ìŒ í•­ëª©ì— ë‚ ì§œ ì •ë³´ ì¶”ê°€ë¡œ ì‚¬ìš©ì ì •ë³´ í™•ì¸ í¸ì˜ì„± í–¥ìƒ

### ì½”ë“œ ë³€ê²½ í†µê³„
- **ìˆ˜ì •ëœ íŒŒì¼**: 2ê°œ
  - `src/pages/StatsPage/StatsPage.jsx`
  - `src/pages/StatsPage/StatsPage.css`
- **ì¶”ê°€ëœ ê¸°ëŠ¥**: 3ê°œ
  - ë‚ ì§œ í‘œì‹œ í˜•ì‹ ë³€ê²½
  - ë‹¬ë ¥ ì•„ì´ì½˜ ì œê±°
  - ê¸°ë¡ì—†ìŒ ë‚ ì§œ ì¶”ì  ë° í‘œì‹œ

### ì£¼ì˜ì‚¬í•­
- `dateStatusMap` êµ¬ì¡°ê°€ ë³€ê²½ë˜ì–´ `noRecord` ë°°ì—´ì´ ì¶”ê°€ë¨
- ê¸°ì¡´ ì½”ë“œì™€ì˜ í˜¸í™˜ì„±ì„ ìœ„í•´ ì´ˆê¸°ê°’ì— `noRecord: []` í¬í•¨
- ì—ëŸ¬ ë°œìƒ ì‹œì—ë„ ê¸°ë¡ì—†ìŒìœ¼ë¡œ ì²˜ë¦¬í•˜ì—¬ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

---

## í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] ì£¼ ë‹¨ìœ„ ì„ íƒ ì‹œ ë‚ ì§œê°€ ì¤„ë°”ê¿ˆ í˜•ì‹ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [ ] ë‹¬ë ¥ ì•„ì´ì½˜ì´ ì£¼ ë‹¨ìœ„ì—ì„œ ì œê±°ë˜ì—ˆëŠ”ì§€ í™•ì¸
- [ ] ê¸°ë¡ì—†ìŒ í•­ëª©ì— ë‚ ì§œê°€ `(nì¼, nì¼)` í˜•ì‹ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [ ] ê¸°ë¡ì—†ìŒ ë‚ ì§œê°€ ì—†ëŠ” ê²½ìš° ì—ëŸ¬ ì—†ì´ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
- [ ] ì›” ë‹¨ìœ„ ì„ íƒ ì‹œ ê¸°ì¡´ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸

---

**ì‘ì—… ì™„ë£Œì¼**: 2026-01-19  
**ì‘ì—…ì**: í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì

